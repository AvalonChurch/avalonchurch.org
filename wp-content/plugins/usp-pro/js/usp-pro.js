/* 
	USP Pro JavaScript by Jeff Starr, Monzilla Media.
	Perpetual Copyright Monzilla Media, All Rights Reserved.
	Read-Only License for USP Pro, All Other Use Prohibited.
	Minify @ https://www.minifier.org/
*/

jQuery(document).ready(function($) {
	
	// "Agree to Terms" toggle
	$('.usp-agree-toggle').click(function(){ $('.usp-agree-terms').slideToggle(100); });
	
	// Multiple forms on same page
	var urlParams = new URLSearchParams(window.location.search);
	var form_id = urlParams.get('form_id');
	var success = urlParams.get('usp_success');
	$('.usp-error-field').each(function() {
		if ($(this).closest('.usp-form-'+ form_id).length == 0) {
			$(this).removeClass('usp-error-field');
		}
	});
	$('.usp-pro').each(function() {
		if (success && !usp_pro_success_form && $(this).hasClass('usp-form-'+ form_id)) {
			$(this).find('.usp-submit').hide();
		}
	});
	
	// Google reCaptcha
	if (typeof usp_recaptcha_key != 'undefined') {
		grecaptcha.ready(function() {
			grecaptcha.execute(usp_recaptcha_key, { action: 'submit' }).then(function(token) {
				$('#recaptcha_response').remove();
				$('.usp-form').prepend('<input type="hidden" name="recaptcha_response" id="recaptcha_response" value="'+ token +'">');
			});
		});
	}
	
	// Disable form button after submit
	$('.usp-form').on('submit', function(e) {
		if (window.parsley) { 
			if ($(this).parsley().isValid()) {
				$('.usp-submit').css('cursor', 'wait');
				$('.usp-submit').attr('disabled', true);
			}
		} else {
			$('.usp-submit').css('cursor', 'wait');
			$('.usp-submit').attr('disabled', true);
		}
	});
	
	// "Add another" link : [usp_files method="" multiple="true"]
	$('.usp-files').each(function(index, value) { 
		var id = '#'+ $(this).attr('id');
		var n = parseInt($(id +' .usp-file-count').val());
		var x = parseInt($(id +' .usp-file-limit').val());
		var y = x - n;
		if (x == 1) {
			$(id +' .usp-add-another').hide();
		} else {
			$(id +' .usp-add-another').click(function(e) {
				e.preventDefault(); n++; y--;
				$('.usp-file-count').val(n);
				var $this = $(this);
				var $new = $this.parent().find('input:visible:last').clone().val('').attr('data-file', n).addClass('usp-clone');
				if ($new.hasClass('usp-input-custom')) {
					$new.attr('id', 'usp_custom_file_'+ n);
				} else {
					$new.attr('id', 'usp-files-'+ n);
				}
				if (y > 0) {
					$this.before($new.fadeIn(300).css('display', 'block'));
				} else if (y <= 0) {
					$this.before($new.fadeIn(300).css('display', 'block'));
					$this.hide();
				} else {
					$this.hide();
				}
			});
		}
	});
	
	// Preview selected images : [usp_files method="select" multiple="true"]
	$('.select-file.multiple').each(function(index, value) {
		$(this).on('change', function(event) {
			
			var any_window = window.URL || window.webkitURL;
			var div = '#'+ $(this).parent().parent().attr('id');
			var dom = $('#'+ $(this).attr('id'))[0];
			var files = dom.files;
			
			var preview = $(div +' input[name*="-preview"]').val();
			if (preview) return false;
			
			$(div +'.usp-preview').empty();
			
			for (var i = 0; i < files.length; i++) {
				var file_id = i + 1;
				var file_url = any_window.createObjectURL(files[i]);
				var file_ext = files[i].name.split('.')[files[i].name.split('.').length - 1].toLowerCase();
				var file_css = get_icon_url(file_url, file_ext);
				
				var append = true;
				var file_prv = $(div +' + .usp-preview .usp-preview-'+ file_id);
				if ($(file_prv).length) append = false;
				
				append_preview(div, file_id, file_url, file_css, append);
				window.URL.revokeObjectURL(files[i]);
			}
		});
	});
	
	// Preview selected images : [usp_files method="select" multiple="false"]
	$(document.body).on('change', '.select-file.single-file', function(event){
		var div_id = '#'+ $(this).parent().attr('id');
		var file_id = 1;
		
		var preview = $(div_id +' input[name*="-preview"]').val();
		if (preview) return false;
		
		if ($(this).val()) previewFiles(event, div_id, file_id);
	});
	
	// Preview selected images : [usp_files method="" multiple="false"]
	$(document.body).on('change', '.add-another.single-file', function(event){
		var div_id = '#'+ $(this).parent().attr('id');
		var file_id = 1;
		
		var preview = $(div_id +' input[name*="-preview"]').val();
		if (preview) return false;
		
		if ($(this).val()) previewFiles(event, div_id, file_id);
	});
	
	// Preview selected images : [usp_files method=""  multiple="true"]
	$(document.body).on('change', '.add-another.multiple', function(event){
		var div_id = '#'+ $(this).parent().parent().attr('id');
		var file_id = $(this).data('file');
		
		var preview = $(div_id +' input[name*="-preview"]').val();
		if (preview) return false;
		
		if ($(this).val()) previewFiles(event, div_id, file_id);
	});
	
	// remove preview items
	$(document).on('click', '.usp-preview-close', function(e){
		// $(this).closest('.usp-preview-item').remove(); // see notes
	});
	
	function previewFiles(event, div_id, file_id) {
		var files = event.target.files;
		var file_name = files[0].name;
		var any_window = window.URL || window.webkitURL;
		
		var file_url = any_window.createObjectURL(files[0]);
		var file_ext = file_name.split('.')[file_name.split('.').length - 1].toLowerCase();
		var file_css = get_icon_url(file_url, file_ext);
		
		var append = true;
		var file_prv = $(div_id +' + .usp-preview .usp-preview-'+ file_id);
		if ($(file_prv).length) append = false;
		
		append_preview(div_id, file_id, file_url, file_css, append);
	}
	
	function append_preview(div_id, file_id, file_url, file_css, append) {
		
		var prv_box = div_id +' + .usp-preview';
		var prv_file = div_id +' + .usp-preview .usp-preview-'+ file_id;
		
		var span = ''; // '<span class="usp-preview-close usp-preview-close-'+ file_id +'" data-id="'+ file_id +'" style="position:absolute;top:2px;right:2px;z-index:999;width:18px;height:18px;text-align:center;line-height:16px;font-size:11px;border-radius:50%;color:#fff;background-color:rgba(0,0,0,0.3);cursor:pointer;">&times;</span>';
		var content = '<div class="usp-preview-item usp-preview-'+ file_id +'" style="position:relative;"><a href="'+ file_url +'" title="Preview of file #'+ file_id +'" target="_blank" rel="noopener noreferrer"></a>'+ span +'</div>';
		var styles = { 'background-image':'url('+ file_css +')', 'background-size':'cover', 'background-repeat':'no-repeat', 'background-position':'center center' };
		
		if (append == true) $(prv_box).append(content);
		else $(prv_file).replaceWith(content);
		
		$(prv_file).css(styles);
	}
	
	function get_icon_url(file_url, file_ext) {
		var url = '';
		if ($.inArray(file_ext, ['bmp','gif','jpe','jpeg','jpg','png','svg','tif','tiff']) > -1) {
			url = file_url;
			
		} else if ($.inArray(file_ext, ['3gp','avi','flv','mov','mp4','mpg','qt','swf','wmv']) > -1) {
			url = get_video_icon();
			
		} else if ($.inArray(file_ext, ['aac','aiff','alac','ape','flac','mid','mp3','ogg','wav','wma']) > -1) {
			url = get_audio_icon();
			
		} else if ($.inArray(file_ext, ['zip','rar']) > -1) {
			url = get_zip_icon();
			
		} else if ($.inArray(file_ext, ['pdf']) > -1) {
			url = get_pdf_icon();
		} else {
			url = get_other_icon();
		}
		return url;
	}
	
	function get_video_icon() {
		return 'data:image/jpeg;base64,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';
	}
	
	function get_audio_icon() {
		return 'data:image/jpeg;base64,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';
	}
	
	function get_zip_icon() {
		return 'data:image/jpeg;base64,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';
	}
	
	function get_pdf_icon() {
		return 'data:image/jpeg;base64,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';
	}
	
	function get_other_icon() {
		return 'data:image/jpeg;base64,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';
	}
	
	// selectize (disable via: var usp_disable_selectize = true; in USP Custom JavaScript setting)
	var disable_selectize = (typeof window.usp_disable_selectize !== 'undefined') ? window.usp_disable_selectize : false;
	if (!disable_selectize) { $('.usp-select').selectize(); }
	
});

/*! selectize.js - v0.12.6 | https://github.com/selectize/selectize.js | Apache License (v2) */
!function(a,b){"function"==typeof define&&define.amd?define("sifter",b):"object"==typeof exports?module.exports=b():a.Sifter=b()}(this,function(){var a=function(a,b){this.items=a,this.settings=b||{diacritics:!0}};a.prototype.tokenize=function(a){if(!(a=e(String(a||"").toLowerCase()))||!a.length)return[];var b,c,d,g,i=[],j=a.split(/ +/);for(b=0,c=j.length;b<c;b++){if(d=f(j[b]),this.settings.diacritics)for(g in h)h.hasOwnProperty(g)&&(d=d.replace(new RegExp(g,"g"),h[g]));i.push({string:j[b],regex:new RegExp(d,"i")})}return i},a.prototype.iterator=function(a,b){var c;c=g(a)?Array.prototype.forEach||function(a){for(var b=0,c=this.length;b<c;b++)a(this[b],b,this)}:function(a){for(var b in this)this.hasOwnProperty(b)&&a(this[b],b,this)},c.apply(a,[b])},a.prototype.getScoreFunction=function(a,b){var c,e,f,g,h;c=this,a=c.prepareSearch(a,b),f=a.tokens,e=a.options.fields,g=f.length,h=a.options.nesting;var i=function(a,b){var c,d;return a?(a=String(a||""),-1===(d=a.search(b.regex))?0:(c=b.string.length/a.length,0===d&&(c+=.5),c)):0},j=function(){var a=e.length;return a?1===a?function(a,b){return i(d(b,e[0],h),a)}:function(b,c){for(var f=0,g=0;f<a;f++)g+=i(d(c,e[f],h),b);return g/a}:function(){return 0}}();return g?1===g?function(a){return j(f[0],a)}:"and"===a.options.conjunction?function(a){for(var b,c=0,d=0;c<g;c++){if((b=j(f[c],a))<=0)return 0;d+=b}return d/g}:function(a){for(var b=0,c=0;b<g;b++)c+=j(f[b],a);return c/g}:function(){return 0}},a.prototype.getSortFunction=function(a,c){var e,f,g,h,i,j,k,l,m,n,o;if(g=this,a=g.prepareSearch(a,c),o=!a.query&&c.sort_empty||c.sort,m=function(a,b){return"$score"===a?b.score:d(g.items[b.id],a,c.nesting)},i=[],o)for(e=0,f=o.length;e<f;e++)(a.query||"$score"!==o[e].field)&&i.push(o[e]);if(a.query){for(n=!0,e=0,f=i.length;e<f;e++)if("$score"===i[e].field){n=!1;break}n&&i.unshift({field:"$score",direction:"desc"})}else for(e=0,f=i.length;e<f;e++)if("$score"===i[e].field){i.splice(e,1);break}for(l=[],e=0,f=i.length;e<f;e++)l.push("desc"===i[e].direction?-1:1);return j=i.length,j?1===j?(h=i[0].field,k=l[0],function(a,c){return k*b(m(h,a),m(h,c))}):function(a,c){var d,e,f;for(d=0;d<j;d++)if(f=i[d].field,e=l[d]*b(m(f,a),m(f,c)))return e;return 0}:null},a.prototype.prepareSearch=function(a,b){if("object"==typeof a)return a;b=c({},b);var d=b.fields,e=b.sort,f=b.sort_empty;return d&&!g(d)&&(b.fields=[d]),e&&!g(e)&&(b.sort=[e]),f&&!g(f)&&(b.sort_empty=[f]),{options:b,query:String(a||"").toLowerCase(),tokens:this.tokenize(a),total:0,items:[]}},a.prototype.search=function(a,b){var c,d,e,f,g=this;return d=this.prepareSearch(a,b),b=d.options,a=d.query,f=b.score||g.getScoreFunction(d),a.length?g.iterator(g.items,function(a,e){c=f(a),(!1===b.filter||c>0)&&d.items.push({score:c,id:e})}):g.iterator(g.items,function(a,b){d.items.push({score:1,id:b})}),e=g.getSortFunction(d,b),e&&d.items.sort(e),d.total=d.items.length,"number"==typeof b.limit&&(d.items=d.items.slice(0,b.limit)),d};var b=function(a,b){return"number"==typeof a&&"number"==typeof b?a>b?1:a<b?-1:0:(a=i(String(a||"")),b=i(String(b||"")),a>b?1:b>a?-1:0)},c=function(a,b){var c,d,e,f;for(c=1,d=arguments.length;c<d;c++)if(f=arguments[c])for(e in f)f.hasOwnProperty(e)&&(a[e]=f[e]);return a},d=function(a,b,c){if(a&&b){if(!c)return a[b];for(var d=b.split(".");d.length&&(a=a[d.shift()]););return a}},e=function(a){return(a+"").replace(/^\s+|\s+$|/g,"")},f=function(a){return(a+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},g=Array.isArray||"undefined"!=typeof $&&$.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},h={a:"[aá¸€á¸Ä‚ÄƒÃ‚Ã¢ÇÇŽÈºâ±¥È¦È§áº áº¡Ã„Ã¤Ã€Ã ÃÃ¡Ä€ÄÃƒÃ£Ã…Ã¥Ä…Ä„ÃƒÄ…Ä„]",b:"[bâ¢Î²Î’Bà¸¿ðŒá›’]",c:"[cÄ†Ä‡ÄˆÄ‰ÄŒÄÄŠÄ‹CÌ„cÌ„Ã‡Ã§á¸ˆá¸‰È»È¼Æ‡ÆˆÉ•á´„ï¼£ï½ƒ]",d:"[dÄŽÄá¸Šá¸‹á¸á¸‘á¸Œá¸á¸’á¸“á¸Žá¸ÄÄ‘DÌ¦dÌ¦Æ‰É–ÆŠÉ—Æ‹ÆŒáµ­á¶á¶‘È¡á´…ï¼¤ï½„Ã°]",e:"[eÃ‰Ã©ÃˆÃ¨ÃŠÃªá¸˜á¸™ÄšÄ›Ä”Ä•áº¼áº½á¸šá¸›áººáº»Ä–Ä—Ã‹Ã«Ä’Ä“È¨È©Ä˜Ä™á¶’É†É‡È„È…áº¾áº¿á»€á»á»„á»…á»‚á»ƒá¸œá¸á¸–á¸—á¸”á¸•È†È‡áº¸áº¹á»†á»‡â±¸á´‡ï¼¥ï½…É˜ÇÆÆÎµ]",f:"[fÆ‘Æ’á¸žá¸Ÿ]",g:"[gÉ¢â‚²Ç¤Ç¥ÄœÄÄžÄŸÄ¢Ä£Æ“É Ä Ä¡]",h:"[hÄ¤Ä¥Ä¦Ä§á¸¨á¸©áº–áº–á¸¤á¸¥á¸¢á¸£É¦Ê°Ç¶Æ•]",i:"[iÃÃ­ÃŒÃ¬Ä¬Ä­ÃŽÃ®ÇÇÃÃ¯á¸®á¸¯Ä¨Ä©Ä®Ä¯ÄªÄ«á»ˆá»‰ÈˆÈ‰ÈŠÈ‹á»Šá»‹á¸¬á¸­Æ—É¨É¨Ì†áµ»á¶–Ä°iIÄ±Éªï¼©ï½‰]",j:"[jÈ·Ä´ÄµÉˆÉ‰ÊÉŸÊ²]",k:"[kÆ˜Æ™ê€êá¸°á¸±Ç¨Ç©á¸²á¸³á¸´á¸µÎºÏ°â‚­]",l:"[lÅÅ‚Ä½Ä¾Ä»Ä¼Ä¹Äºá¸¶á¸·á¸¸á¸¹á¸¼á¸½á¸ºá¸»Ä¿Å€È½Æšâ± â±¡â±¢É«É¬á¶…É­È´ÊŸï¼¬ï½Œ]",n:"[nÅƒÅ„Ç¸Ç¹Å‡ÅˆÃ‘Ã±á¹„á¹…Å…Å†á¹†á¹‡á¹Šá¹‹á¹ˆá¹‰NÌˆnÌˆÆÉ²È Æžáµ°á¶‡É³ÈµÉ´ï¼®ï½ŽÅŠÅ‹]",o:"[oÃ˜Ã¸Ã–Ã¶Ã“Ã³Ã’Ã²Ã”Ã´Ç‘Ç’ÅÅ‘ÅŽÅÈ®È¯á»Œá»ÆŸÉµÆ Æ¡á»Žá»ÅŒÅÃ•ÃµÇªÇ«ÈŒÈÕ•Ö…]",p:"[pá¹”á¹•á¹–á¹—â±£áµ½Æ¤Æ¥áµ±]",q:"[qê–ê—Ê ÉŠÉ‹ê˜ê™qÌƒ]",r:"[rÅ”Å•ÉŒÉÅ˜Å™Å–Å—á¹˜á¹™ÈÈ‘È’È“á¹šá¹›â±¤É½]",s:"[sÅšÅ›á¹ á¹¡á¹¢á¹£êž¨êž©ÅœÅÅ Å¡ÅžÅŸÈ˜È™SÌˆsÌˆ]",t:"[tÅ¤Å¥á¹ªá¹«Å¢Å£á¹¬á¹­Æ®ÊˆÈšÈ›á¹°á¹±á¹®á¹¯Æ¬Æ­]",u:"[uÅ¬Å­É„Ê‰á»¤á»¥ÃœÃ¼ÃšÃºÃ™Ã¹Ã›Ã»Ç“Ç”Å°Å±Å¬Å­Æ¯Æ°á»¦á»§ÅªÅ«Å¨Å©Å²Å³È”È•âˆª]",v:"[vá¹¼á¹½á¹¾á¹¿Æ²Ê‹êžêŸâ±±Ê‹]",w:"[wáº‚áºƒáº€áºÅ´Åµáº„áº…áº†áº‡áºˆáº‰]",x:"[xáºŒáºáºŠáº‹Ï‡]",y:"[yÃÃ½á»²á»³Å¶Å·Å¸Ã¿á»¸á»¹áºŽáºá»´á»µÉŽÉÆ³Æ´]",z:"[zÅ¹Åºáºáº‘Å½Å¾Å»Å¼áº’áº“áº”áº•ÆµÆ¶]"},i=function(){var a,b,c,d,e="",f={};for(c in h)if(h.hasOwnProperty(c))for(d=h[c].substring(2,h[c].length-1),e+=d,a=0,b=d.length;a<b;a++)f[d.charAt(a)]=c;var g=new RegExp("["+e+"]","g");return function(a){return a.replace(g,function(a){return f[a]}).toLowerCase()}}();return a}),function(a,b){"function"==typeof define&&define.amd?define("microplugin",b):"object"==typeof exports?module.exports=b():a.MicroPlugin=b()}(this,function(){var a={};a.mixin=function(a){a.plugins={},a.prototype.initializePlugins=function(a){var c,d,e,f=this,g=[];if(f.plugins={names:[],settings:{},requested:{},loaded:{}},b.isArray(a))for(c=0,d=a.length;c<d;c++)"string"==typeof a[c]?g.push(a[c]):(f.plugins.settings[a[c].name]=a[c].options,g.push(a[c].name));else if(a)for(e in a)a.hasOwnProperty(e)&&(f.plugins.settings[e]=a[e],g.push(e));for(;g.length;)f.require(g.shift())},a.prototype.loadPlugin=function(b){var c=this,d=c.plugins,e=a.plugins[b];if(!a.plugins.hasOwnProperty(b))throw new Error('Unable to find "'+b+'" plugin');d.requested[b]=!0,d.loaded[b]=e.fn.apply(c,[c.plugins.settings[b]||{}]),d.names.push(b)},a.prototype.require=function(a){var b=this,c=b.plugins;if(!b.plugins.loaded.hasOwnProperty(a)){if(c.requested[a])throw new Error('Plugin has circular dependency ("'+a+'")');b.loadPlugin(a)}return c.loaded[a]},a.define=function(b,c){a.plugins[b]={name:b,fn:c}}};var b={isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}};return a}),function(a,b){"function"==typeof define&&define.amd?define("selectize",["jquery","sifter","microplugin"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("sifter"),require("microplugin")):a.Selectize=b(a.jQuery,a.Sifter,a.MicroPlugin)}(this,function(a,b,c){"use strict";var d=function(a,b){if("string"!=typeof b||b.length){var c="string"==typeof b?new RegExp(b,"i"):b,d=function(a){var b=0;if(3===a.nodeType){var e=a.data.search(c);if(e>=0&&a.data.length>0){var f=a.data.match(c),g=document.createElement("span");g.className="highlight";var h=a.splitText(e),i=(h.splitText(f[0].length),h.cloneNode(!0));g.appendChild(i),h.parentNode.replaceChild(g,h),b=1}}else if(1===a.nodeType&&a.childNodes&&!/(script|style)/i.test(a.tagName)&&("highlight"!==a.className||"SPAN"!==a.tagName))for(var j=0;j<a.childNodes.length;++j)j+=d(a.childNodes[j]);return b};return a.each(function(){d(this)})}};a.fn.removeHighlight=function(){return this.find("span.highlight").each(function(){this.parentNode.firstChild.nodeName;var a=this.parentNode;a.replaceChild(this.firstChild,this),a.normalize()}).end()};var e=function(){};e.prototype={on:function(a,b){this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(b)},off:function(a,b){var c=arguments.length;return 0===c?delete this._events:1===c?delete this._events[a]:(this._events=this._events||{},void(a in this._events!=!1&&this._events[a].splice(this._events[a].indexOf(b),1)))},trigger:function(a){if(this._events=this._events||{},a in this._events!=!1)for(var b=0;b<this._events[a].length;b++)this._events[a][b].apply(this,Array.prototype.slice.call(arguments,1))}},e.mixin=function(a){for(var b=["on","off","trigger"],c=0;c<b.length;c++)a.prototype[b[c]]=e.prototype[b[c]]};var f=/Mac/.test(navigator.userAgent),g=f?91:17,h=f?18:17,i=!/android/i.test(window.navigator.userAgent)&&!!document.createElement("input").validity,j=function(a){return void 0!==a},k=function(a){return void 0===a||null===a?null:"boolean"==typeof a?a?"1":"0":a+""},l=function(a){return(a+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},m={};m.before=function(a,b,c){var d=a[b];a[b]=function(){return c.apply(a,arguments),d.apply(a,arguments)}},m.after=function(a,b,c){var d=a[b];a[b]=function(){var b=d.apply(a,arguments);return c.apply(a,arguments),b}};var n=function(a){var b=!1;return function(){b||(b=!0,a.apply(this,arguments))}},o=function(a,b){var c;return function(){var d=this,e=arguments;window.clearTimeout(c),c=window.setTimeout(function(){a.apply(d,e)},b)}},p=function(a,b,c){var d,e=a.trigger,f={};a.trigger=function(){var c=arguments[0];if(-1===b.indexOf(c))return e.apply(a,arguments);f[c]=arguments},c.apply(a,[]),a.trigger=e;for(d in f)f.hasOwnProperty(d)&&e.apply(a,f[d])},q=function(a,b,c,d){a.on(b,c,function(b){for(var c=b.target;c&&c.parentNode!==a[0];)c=c.parentNode;return b.currentTarget=c,d.apply(this,[b])})},r=function(a){var b={};if("selectionStart"in a)b.start=a.selectionStart,b.length=a.selectionEnd-b.start;else if(document.selection){a.focus();var c=document.selection.createRange(),d=document.selection.createRange().text.length;c.moveStart("character",-a.value.length),b.start=c.text.length-d,b.length=d}return b},s=function(a,b,c){var d,e,f={};if(c)for(d=0,e=c.length;d<e;d++)f[c[d]]=a.css(c[d]);else f=a.css();b.css(f)},t=function(b,c){return b?(w.$testInput||(w.$testInput=a("<span />").css({position:"absolute",top:-99999,left:-99999,width:"auto",padding:0,whiteSpace:"pre"}).appendTo("body")),w.$testInput.text(b),s(c,w.$testInput,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]),w.$testInput.width()):0},u=function(a){var b=null,c=function(c,d){var e,f,g,h,i,j,k,l;c=c||window.event||{},d=d||{},c.metaKey||c.altKey||(d.force||!1!==a.data("grow"))&&(e=a.val(),c.type&&"keydown"===c.type.toLowerCase()&&(f=c.keyCode,g=f>=48&&f<=57||f>=65&&f<=90||f>=96&&f<=111||f>=186&&f<=222||32===f,46===f||8===f?(l=r(a[0]),l.length?e=e.substring(0,l.start)+e.substring(l.start+l.length):8===f&&l.start?e=e.substring(0,l.start-1)+e.substring(l.start+1):46===f&&void 0!==l.start&&(e=e.substring(0,l.start)+e.substring(l.start+1))):g&&(j=c.shiftKey,k=String.fromCharCode(c.keyCode),k=j?k.toUpperCase():k.toLowerCase(),e+=k)),h=a.attr("placeholder"),!e&&h&&(e=h),(i=t(e,a)+4)!==b&&(b=i,a.width(i),a.triggerHandler("resize")))};a.on("keydown keyup update blur",c),c()},v=function(a){var b=document.createElement("div");return b.appendChild(a.cloneNode(!0)),b.innerHTML},w=function(c,d){var e,f,g,h,i=this;h=c[0],h.selectize=i;var j=window.getComputedStyle&&window.getComputedStyle(h,null);if(g=j?j.getPropertyValue("direction"):h.currentStyle&&h.currentStyle.direction,g=g||c.parents("[dir]:first").attr("dir")||"",a.extend(i,{order:0,settings:d,$input:c,tabIndex:c.attr("tabindex")||"",tagType:"select"===h.tagName.toLowerCase()?1:2,rtl:/rtl/i.test(g),eventNS:".selectize"+ ++w.count,highlightedValue:null,isBlurring:!1,isOpen:!1,isDisabled:!1,isRequired:c.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:null===d.loadThrottle?i.onSearchChange:o(i.onSearchChange,d.loadThrottle)}),i.sifter=new b(this.options,{diacritics:d.diacritics}),i.settings.options){for(e=0,f=i.settings.options.length;e<f;e++)i.registerOption(i.settings.options[e]);delete i.settings.options}if(i.settings.optgroups){for(e=0,f=i.settings.optgroups.length;e<f;e++)i.registerOptionGroup(i.settings.optgroups[e]);delete i.settings.optgroups}i.settings.mode=i.settings.mode||(1===i.settings.maxItems?"single":"multi"),"boolean"!=typeof i.settings.hideSelected&&(i.settings.hideSelected="multi"===i.settings.mode),i.initializePlugins(i.settings.plugins),i.setupCallbacks(),i.setupTemplates(),i.setup()};return e.mixin(w),void 0!==c?c.mixin(w):function(a,b){b||(b={});console.error("Selectize: "+a),b.explanation&&(console.group&&console.group(),console.error(b.explanation),console.group&&console.groupEnd())}("Dependency MicroPlugin is missing",{explanation:'Make sure you either: (1) are using the "standalone" version of Selectize, or (2) require MicroPlugin before you load Selectize.'}),a.extend(w.prototype,{setup:function(){var b,c,d,e,j,k,l,m,n,o,p=this,r=p.settings,s=p.eventNS,t=a(window),v=a(document),w=p.$input;if(l=p.settings.mode,m=w.attr("class")||"",b=a("<div>").addClass(r.wrapperClass).addClass(m).addClass(l),c=a("<div>").addClass(r.inputClass).addClass("items").appendTo(b),d=a('<input type="text" autocomplete="off" />').appendTo(c).attr("tabindex",w.is(":disabled")?"-1":p.tabIndex),k=a(r.dropdownParent||b),e=a("<div>").addClass(r.dropdownClass).addClass(l).hide().appendTo(k),j=a("<div>").addClass(r.dropdownContentClass).appendTo(e),(o=w.attr("id"))&&(d.attr("id",o+"-selectized"),a("label[for='"+o+"']").attr("for",o+"-selectized")),p.settings.copyClassesToDropdown&&e.addClass(m),b.css({width:w[0].style.width}),p.plugins.names.length&&(n="plugin-"+p.plugins.names.join(" plugin-"),b.addClass(n),e.addClass(n)),(null===r.maxItems||r.maxItems>1)&&1===p.tagType&&w.attr("multiple","multiple"),p.settings.placeholder&&d.attr("placeholder",r.placeholder),!p.settings.splitOn&&p.settings.delimiter){var x=p.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");p.settings.splitOn=new RegExp("\\s*"+x+"+\\s*")}w.attr("autocorrect")&&d.attr("autocorrect",w.attr("autocorrect")),w.attr("autocapitalize")&&d.attr("autocapitalize",w.attr("autocapitalize")),d[0].type=w[0].type,p.$wrapper=b,p.$control=c,p.$control_input=d,p.$dropdown=e,p.$dropdown_content=j,e.on("mouseenter mousedown click","[data-disabled]>[data-selectable]",function(a){a.stopImmediatePropagation()}),e.on("mouseenter","[data-selectable]",function(){return p.onOptionHover.apply(p,arguments)}),e.on("mousedown click","[data-selectable]",function(){return p.onOptionSelect.apply(p,arguments)}),q(c,"mousedown","*:not(input)",function(){return p.onItemSelect.apply(p,arguments)}),u(d),c.on({mousedown:function(){return p.onMouseDown.apply(p,arguments)},click:function(){return p.onClick.apply(p,arguments)}}),d.on({mousedown:function(a){a.stopPropagation()},keydown:function(){return p.onKeyDown.apply(p,arguments)},keyup:function(){return p.onKeyUp.apply(p,arguments)},keypress:function(){return p.onKeyPress.apply(p,arguments)},resize:function(){p.positionDropdown.apply(p,[])},blur:function(){return p.onBlur.apply(p,arguments)},focus:function(){return p.ignoreBlur=!1,p.onFocus.apply(p,arguments)},paste:function(){return p.onPaste.apply(p,arguments)}}),v.on("keydown"+s,function(a){p.isCmdDown=a[f?"metaKey":"ctrlKey"],p.isCtrlDown=a[f?"altKey":"ctrlKey"],p.isShiftDown=a.shiftKey}),v.on("keyup"+s,function(a){a.keyCode===h&&(p.isCtrlDown=!1),16===a.keyCode&&(p.isShiftDown=!1),a.keyCode===g&&(p.isCmdDown=!1)}),v.on("mousedown"+s,function(a){if(p.isFocused){if(a.target===p.$dropdown[0]||a.target.parentNode===p.$dropdown[0])return!1;p.$control.has(a.target).length||a.target===p.$control[0]||p.blur(a.target)}}),t.on(["scroll"+s,"resize"+s].join(" "),function(){p.isOpen&&p.positionDropdown.apply(p,arguments)}),t.on("mousemove"+s,function(){p.ignoreHover=!1}),this.revertSettings={$children:w.children().detach(),tabindex:w.attr("tabindex")},w.attr("tabindex",-1).hide().after(p.$wrapper),a.isArray(r.items)&&(p.setValue(r.items),delete r.items),i&&w.on("invalid"+s,function(a){a.preventDefault(),p.isInvalid=!0,p.refreshState()}),p.updateOriginalInput(),p.refreshItems(),p.refreshState(),p.updatePlaceholder(),p.isSetup=!0,w.is(":disabled")&&p.disable(),p.on("change",this.onChange),w.data("selectize",p),w.addClass("selectized"),p.trigger("initialize"),!0===r.preload&&p.onSearchChange("")},setupTemplates:function(){var b=this,c=b.settings.labelField,d=b.settings.optgroupLabelField,e={optgroup:function(a){return'<div class="optgroup">'+a.html+"</div>"},optgroup_header:function(a,b){return'<div class="optgroup-header">'+b(a[d])+"</div>"},option:function(a,b){return'<div class="option">'+b(a[c])+"</div>"},item:function(a,b){return'<div class="item">'+b(a[c])+"</div>"},option_create:function(a,b){return'<div class="create">Add <strong>'+b(a.input)+"</strong>&hellip;</div>"}};b.settings.render=a.extend({},e,b.settings.render)},setupCallbacks:function(){var a,b,c={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(a in c)c.hasOwnProperty(a)&&(b=this.settings[c[a]])&&this.on(a,b)},onClick:function(a){var b=this;b.isFocused&&b.isOpen||(b.focus(),a.preventDefault())},onMouseDown:function(b){var c=this,d=b.isDefaultPrevented();a(b.target);if(c.isFocused){if(b.target!==c.$control_input[0])return"single"===c.settings.mode?c.isOpen?c.close():c.open():d||c.setActiveItem(null),!1}else d||window.setTimeout(function(){c.focus()},0)},onChange:function(){this.$input.trigger("change")},onPaste:function(b){var c=this;if(c.isFull()||c.isInputHidden||c.isLocked)return void b.preventDefault();c.settings.splitOn&&setTimeout(function(){var b=c.$control_input.val();if(b.match(c.settings.splitOn))for(var d=a.trim(b).split(c.settings.splitOn),e=0,f=d.length;e<f;e++)c.createItem(d[e])},0)},onKeyPress:function(a){if(this.isLocked)return a&&a.preventDefault();var b=String.fromCharCode(a.keyCode||a.which);return this.settings.create&&"multi"===this.settings.mode&&b===this.settings.delimiter?(this.createItem(),a.preventDefault(),!1):void 0},onKeyDown:function(a){var b=(a.target,this.$control_input[0],this);if(b.isLocked)return void(9!==a.keyCode&&a.preventDefault());switch(a.keyCode){case 65:if(b.isCmdDown)return void b.selectAll();break;case 27:return void(b.isOpen&&(a.preventDefault(),a.stopPropagation(),b.close()));case 78:if(!a.ctrlKey||a.altKey)break;case 40:if(!b.isOpen&&b.hasOptions)b.open();else if(b.$activeOption){b.ignoreHover=!0;var c=b.getAdjacentOption(b.$activeOption,1);c.length&&b.setActiveOption(c,!0,!0)}return void a.preventDefault();case 80:if(!a.ctrlKey||a.altKey)break;case 38:if(b.$activeOption){b.ignoreHover=!0;var d=b.getAdjacentOption(b.$activeOption,-1);d.length&&b.setActiveOption(d,!0,!0)}return void a.preventDefault();case 13:return void(b.isOpen&&b.$activeOption&&(b.onOptionSelect({currentTarget:b.$activeOption}),a.preventDefault()));case 37:return void b.advanceSelection(-1,a);case 39:return void b.advanceSelection(1,a);case 9:return b.settings.selectOnTab&&b.isOpen&&b.$activeOption&&(b.onOptionSelect({currentTarget:b.$activeOption}),b.isFull()||a.preventDefault()),void(b.settings.create&&b.createItem()&&a.preventDefault());case 8:case 46:return void b.deleteSelection(a)}return!b.isFull()&&!b.isInputHidden||(f?a.metaKey:a.ctrlKey)?void 0:void a.preventDefault()},onKeyUp:function(a){var b=this;if(b.isLocked)return a&&a.preventDefault();var c=b.$control_input.val()||"";b.lastValue!==c&&(b.lastValue=c,b.onSearchChange(c),b.refreshOptions(),b.trigger("type",c))},onSearchChange:function(a){var b=this,c=b.settings.load;c&&(b.loadedSearches.hasOwnProperty(a)||(b.loadedSearches[a]=!0,b.load(function(d){c.apply(b,[a,d])})))},onFocus:function(a){var b=this,c=b.isFocused;if(b.isDisabled)return b.blur(),a&&a.preventDefault(),!1;b.ignoreFocus||(b.isFocused=!0,"focus"===b.settings.preload&&b.onSearchChange(""),c||b.trigger("focus"),b.$activeItems.length||(b.showInput(),b.setActiveItem(null),b.refreshOptions(!!b.settings.openOnFocus)),b.refreshState())},onBlur:function(a,b){var c=this;if(c.isFocused&&(c.isFocused=!1,!c.ignoreFocus)){if(!c.ignoreBlur&&document.activeElement===c.$dropdown_content[0])return c.ignoreBlur=!0,void c.onFocus(a);var d=function(){c.close(),c.setTextboxValue(""),c.setActiveItem(null),c.setActiveOption(null),c.setCaret(c.items.length),c.refreshState(),b&&b.focus&&b.focus(),c.isBlurring=!1,c.ignoreFocus=!1,c.trigger("blur")};c.isBlurring=!0,c.ignoreFocus=!0,c.settings.create&&c.settings.createOnBlur?c.createItem(null,!1,d):d()}},onOptionHover:function(a){this.ignoreHover||this.setActiveOption(a.currentTarget,!1)},onOptionSelect:function(b){var c,d,e=this;b.preventDefault&&(b.preventDefault(),b.stopPropagation()),d=a(b.currentTarget),d.hasClass("create")?e.createItem(null,function(){e.settings.closeAfterSelect&&e.close()}):void 0!==(c=d.attr("data-value"))&&(e.lastQuery=null,e.setTextboxValue(""),e.addItem(c),e.settings.closeAfterSelect?e.close():!e.settings.hideSelected&&b.type&&/mouse/.test(b.type)&&e.setActiveOption(e.getOption(c)))},onItemSelect:function(a){var b=this;b.isLocked||"multi"===b.settings.mode&&(a.preventDefault(),b.setActiveItem(a.currentTarget,a))},load:function(a){var b=this,c=b.$wrapper.addClass(b.settings.loadingClass);b.loading++,a.apply(b,[function(a){b.loading=Math.max(b.loading-1,0),a&&a.length&&(b.addOption(a),b.refreshOptions(b.isFocused&&!b.isInputHidden)),b.loading||c.removeClass(b.settings.loadingClass),b.trigger("load",a)}])},setTextboxValue:function(a){var b=this.$control_input;b.val()!==a&&(b.val(a).triggerHandler("update"),this.lastValue=a)},getValue:function(){return 1===this.tagType&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)},setValue:function(a,b){p(this,b?[]:["change"],function(){this.clear(b),this.addItems(a,b)})},setActiveItem:function(b,c){var d,e,f,g,h,i,j,k,l=this;if("single"!==l.settings.mode){if(b=a(b),!b.length)return a(l.$activeItems).removeClass("active"),l.$activeItems=[],void(l.isFocused&&l.showInput());if("mousedown"===(d=c&&c.type.toLowerCase())&&l.isShiftDown&&l.$activeItems.length){for(k=l.$control.children(".active:last"),g=Array.prototype.indexOf.apply(l.$control[0].childNodes,[k[0]]),h=Array.prototype.indexOf.apply(l.$control[0].childNodes,[b[0]]),g>h&&(j=g,g=h,h=j),e=g;e<=h;e++)i=l.$control[0].childNodes[e],-1===l.$activeItems.indexOf(i)&&(a(i).addClass("active"),l.$activeItems.push(i));c.preventDefault()}else"mousedown"===d&&l.isCtrlDown||"keydown"===d&&this.isShiftDown?b.hasClass("active")?(f=l.$activeItems.indexOf(b[0]),l.$activeItems.splice(f,1),b.removeClass("active")):l.$activeItems.push(b.addClass("active")[0]):(a(l.$activeItems).removeClass("active"),l.$activeItems=[b.addClass("active")[0]]);l.hideInput(),this.isFocused||l.focus()}},setActiveOption:function(b,c,d){var e,f,g,h,i,k=this;k.$activeOption&&k.$activeOption.removeClass("active"),k.$activeOption=null,b=a(b),b.length&&(k.$activeOption=b.addClass("active"),!c&&j(c)||(e=k.$dropdown_content.height(),f=k.$activeOption.outerHeight(!0),c=k.$dropdown_content.scrollTop()||0,g=k.$activeOption.offset().top-k.$dropdown_content.offset().top+c,h=g,i=g-e+f,g+f>e+c?k.$dropdown_content.stop().animate({scrollTop:i},d?k.settings.scrollDuration:0):g<c&&k.$dropdown_content.stop().animate({scrollTop:h},d?k.settings.scrollDuration:0)))},selectAll:function(){var a=this;"single"!==a.settings.mode&&(a.$activeItems=Array.prototype.slice.apply(a.$control.children(":not(input)").addClass("active")),a.$activeItems.length&&(a.hideInput(),a.close()),a.focus())},hideInput:function(){var a=this;a.setTextboxValue(""),a.$control_input.css({opacity:0,position:"absolute",left:a.rtl?1e4:-1e4}),a.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},focus:function(){var a=this;a.isDisabled||(a.ignoreFocus=!0,a.$control_input[0].focus(),window.setTimeout(function(){a.ignoreFocus=!1,a.onFocus()},0))},blur:function(a){this.$control_input[0].blur(),this.onBlur(null,a)},getScoreFunction:function(a){return this.sifter.getScoreFunction(a,this.getSearchOptions())},getSearchOptions:function(){var a=this.settings,b=a.sortField;return"string"==typeof b&&(b=[{field:b}]),{fields:a.searchField,conjunction:a.searchConjunction,sort:b,nesting:a.nesting}},search:function(b){var c,d,e,f=this,g=f.settings,h=this.getSearchOptions();if(g.score&&"function"!=typeof(e=f.settings.score.apply(this,[b])))throw new Error('Selectize "score" setting must be a function that returns a function');if(b!==f.lastQuery?(f.lastQuery=b,d=f.sifter.search(b,a.extend(h,{score:e})),f.currentResults=d):d=a.extend(!0,{},f.currentResults),g.hideSelected)for(c=d.items.length-1;c>=0;c--)-1!==f.items.indexOf(k(d.items[c].id))&&d.items.splice(c,1);return d},refreshOptions:function(b){var c,e,f,g,h,i,j,l,m,n,o,p,q,r,s,t;void 0===b&&(b=!0);var u=this,w=a.trim(u.$control_input.val()),x=u.search(w),y=u.$dropdown_content,z=u.$activeOption&&k(u.$activeOption.attr("data-value"));for(g=x.items.length,"number"==typeof u.settings.maxOptions&&(g=Math.min(g,u.settings.maxOptions)),h={},i=[],c=0;c<g;c++)for(j=u.options[x.items[c].id],l=u.render("option",j),m=j[u.settings.optgroupField]||"",n=a.isArray(m)?m:[m],e=0,f=n&&n.length;e<f;e++)m=n[e],u.optgroups.hasOwnProperty(m)||(m=""),h.hasOwnProperty(m)||(h[m]=document.createDocumentFragment(),i.push(m)),h[m].appendChild(l);for(this.settings.lockOptgroupOrder&&i.sort(function(a,b){return(u.optgroups[a].$order||0)-(u.optgroups[b].$order||0)}),o=document.createDocumentFragment(),c=0,g=i.length;c<g;c++)m=i[c],u.optgroups.hasOwnProperty(m)&&h[m].childNodes.length?(p=document.createDocumentFragment(),p.appendChild(u.render("optgroup_header",u.optgroups[m])),p.appendChild(h[m]),o.appendChild(u.render("optgroup",a.extend({},u.optgroups[m],{html:v(p),dom:p})))):o.appendChild(h[m]);if(y.html(o),u.settings.highlight&&(y.removeHighlight(),x.query.length&&x.tokens.length))for(c=0,g=x.tokens.length;c<g;c++)d(y,x.tokens[c].regex);if(!u.settings.hideSelected)for(c=0,g=u.items.length;c<g;c++)u.getOption(u.items[c]).addClass("selected");q=u.canCreate(w),q&&(y.prepend(u.render("option_create",{input:w})),t=a(y[0].childNodes[0])),u.hasOptions=x.items.length>0||q,u.hasOptions?(x.items.length>0?(s=z&&u.getOption(z),s&&s.length?r=s:"single"===u.settings.mode&&u.items.length&&(r=u.getOption(u.items[0])),r&&r.length||(r=t&&!u.settings.addPrecedence?u.getAdjacentOption(t,1):y.find("[data-selectable]:first"))):r=t,u.setActiveOption(r),b&&!u.isOpen&&u.open()):(u.setActiveOption(null),b&&u.isOpen&&u.close())},addOption:function(b){var c,d,e,f=this;if(a.isArray(b))for(c=0,d=b.length;c<d;c++)f.addOption(b[c]);else(e=f.registerOption(b))&&(f.userOptions[e]=!0,f.lastQuery=null,f.trigger("option_add",e,b))},registerOption:function(a){var b=k(a[this.settings.valueField]);return void 0!==b&&null!==b&&!this.options.hasOwnProperty(b)&&(a.$order=a.$order||++this.order,this.options[b]=a,b)},registerOptionGroup:function(a){var b=k(a[this.settings.optgroupValueField]);return!!b&&(a.$order=a.$order||++this.order,this.optgroups[b]=a,b)},addOptionGroup:function(a,b){b[this.settings.optgroupValueField]=a,(a=this.registerOptionGroup(b))&&this.trigger("optgroup_add",a,b)},removeOptionGroup:function(a){this.optgroups.hasOwnProperty(a)&&(delete this.optgroups[a],this.renderCache={},this.trigger("optgroup_remove",a))},clearOptionGroups:function(){this.optgroups={},this.renderCache={},this.trigger("optgroup_clear")},updateOption:function(b,c){var d,e,f,g,h,i,j,l=this;if(b=k(b),f=k(c[l.settings.valueField]),null!==b&&l.options.hasOwnProperty(b)){if("string"!=typeof f)throw new Error("Value must be set in option data");j=l.options[b].$order,f!==b&&(delete l.options[b],-1!==(g=l.items.indexOf(b))&&l.items.splice(g,1,f)),c.$order=c.$order||j,l.options[f]=c,h=l.renderCache.item,i=l.renderCache.option,h&&(delete h[b],delete h[f]),i&&(delete i[b],delete i[f]),-1!==l.items.indexOf(f)&&(d=l.getItem(b),e=a(l.render("item",c)),d.hasClass("active")&&e.addClass("active"),d.replaceWith(e)),l.lastQuery=null,l.isOpen&&l.refreshOptions(!1)}},removeOption:function(a,b){var c=this;a=k(a);var d=c.renderCache.item,e=c.renderCache.option;d&&delete d[a],e&&delete e[a],delete c.userOptions[a],delete c.options[a],c.lastQuery=null,c.trigger("option_remove",a),c.removeItem(a,b)},clearOptions:function(){var b=this;b.loadedSearches={},b.userOptions={},b.renderCache={};var c=b.options;a.each(b.options,function(a,d){-1==b.items.indexOf(a)&&delete c[a]}),b.options=b.sifter.items=c,b.lastQuery=null,b.trigger("option_clear")},getOption:function(a){return this.getElementWithValue(a,this.$dropdown_content.find("[data-selectable]"))},getAdjacentOption:function(b,c){var d=this.$dropdown.find("[data-selectable]"),e=d.index(b)+c;return e>=0&&e<d.length?d.eq(e):a()},getElementWithValue:function(b,c){if(void 0!==(b=k(b))&&null!==b)for(var d=0,e=c.length;d<e;d++)if(c[d].getAttribute("data-value")===b)return a(c[d]);return a()},getItem:function(a){return this.getElementWithValue(a,this.$control.children())},addItems:function(b,c){this.buffer=document.createDocumentFragment();for(var d=this.$control[0].childNodes,e=0;e<d.length;e++)this.buffer.appendChild(d[e]);for(var f=a.isArray(b)?b:[b],e=0,g=f.length;e<g;e++)this.isPending=e<g-1,this.addItem(f[e],c);var h=this.$control[0];h.insertBefore(this.buffer,h.firstChild),this.buffer=null},addItem:function(b,c){p(this,c?[]:["change"],function(){var d,e,f,g,h,i=this,j=i.settings.mode;if(b=k(b),-1!==i.items.indexOf(b))return void("single"===j&&i.close());i.options.hasOwnProperty(b)&&("single"===j&&i.clear(c),"multi"===j&&i.isFull()||(d=a(i.render("item",i.options[b])),h=i.isFull(),i.items.splice(i.caretPos,0,b),i.insertAtCaret(d),(!i.isPending||!h&&i.isFull())&&i.refreshState(),i.isSetup&&(f=i.$dropdown_content.find("[data-selectable]"),i.isPending||(e=i.getOption(b),g=i.getAdjacentOption(e,1).attr("data-value"),i.refreshOptions(i.isFocused&&"single"!==j),g&&i.setActiveOption(i.getOption(g))),!f.length||i.isFull()?i.close():i.isPending||i.positionDropdown(),i.updatePlaceholder(),i.trigger("item_add",b,d),i.isPending||i.updateOriginalInput({silent:c}))))})},removeItem:function(b,c){var d,e,f,g=this;d=b instanceof a?b:g.getItem(b),b=k(d.attr("data-value")),-1!==(e=g.items.indexOf(b))&&(d.remove(),d.hasClass("active")&&(f=g.$activeItems.indexOf(d[0]),g.$activeItems.splice(f,1)),g.items.splice(e,1),g.lastQuery=null,!g.settings.persist&&g.userOptions.hasOwnProperty(b)&&g.removeOption(b,c),e<g.caretPos&&g.setCaret(g.caretPos-1),g.refreshState(),g.updatePlaceholder(),g.updateOriginalInput({silent:c}),g.positionDropdown(),g.trigger("item_remove",b,d))},createItem:function(b,c){var d=this,e=d.caretPos;b=b||a.trim(d.$control_input.val()||"");var f=arguments[arguments.length-1];if("function"!=typeof f&&(f=function(){}),"boolean"!=typeof c&&(c=!0),!d.canCreate(b))return f(),!1;d.lock();var g="function"==typeof d.settings.create?this.settings.create:function(a){var b={};return b[d.settings.labelField]=a,b[d.settings.valueField]=a,b},h=n(function(a){if(d.unlock(),!a||"object"!=typeof a)return f();var b=k(a[d.settings.valueField]);if("string"!=typeof b)return f();d.setTextboxValue(""),d.addOption(a),d.setCaret(e),d.addItem(b),d.refreshOptions(c&&"single"!==d.settings.mode),f(a)}),i=g.apply(this,[b,h]);return void 0!==i&&h(i),!0},refreshItems:function(){this.lastQuery=null,this.isSetup&&this.addItem(this.items),this.refreshState(),this.updateOriginalInput()},refreshState:function(){this.refreshValidityState(),this.refreshClasses()},refreshValidityState:function(){if(!this.isRequired)return!1;var a=!this.items.length;this.isInvalid=a,this.$control_input.prop("required",a),this.$input.prop("required",!a)},refreshClasses:function(){var b=this,c=b.isFull(),d=b.isLocked;b.$wrapper.toggleClass("rtl",b.rtl),b.$control.toggleClass("focus",b.isFocused).toggleClass("disabled",b.isDisabled).toggleClass("required",b.isRequired).toggleClass("invalid",b.isInvalid).toggleClass("locked",d).toggleClass("full",c).toggleClass("not-full",!c).toggleClass("input-active",b.isFocused&&!b.isInputHidden).toggleClass("dropdown-active",b.isOpen).toggleClass("has-options",!a.isEmptyObject(b.options)).toggleClass("has-items",b.items.length>0),b.$control_input.data("grow",!c&&!d)},isFull:function(){
return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(a){var b,c,d,e,f=this;if(a=a||{},1===f.tagType){for(d=[],b=0,c=f.items.length;b<c;b++)e=f.options[f.items[b]][f.settings.labelField]||"",d.push('<option value="'+l(f.items[b])+'" selected="selected">'+l(e)+"</option>");d.length||this.$input.attr("multiple")||d.push('<option value="" selected="selected"></option>'),f.$input.html(d.join(""))}else f.$input.val(f.getValue()),f.$input.attr("value",f.$input.val());f.isSetup&&(a.silent||f.trigger("change",f.$input.val()))},updatePlaceholder:function(){if(this.settings.placeholder){var a=this.$control_input;this.items.length?a.removeAttr("placeholder"):a.attr("placeholder",this.settings.placeholder),a.triggerHandler("update",{force:!0})}},open:function(){var a=this;a.isLocked||a.isOpen||"multi"===a.settings.mode&&a.isFull()||(a.focus(),a.isOpen=!0,a.refreshState(),a.$dropdown.css({visibility:"hidden",display:"block"}),a.positionDropdown(),a.$dropdown.css({visibility:"visible"}),a.trigger("dropdown_open",a.$dropdown))},close:function(){var a=this,b=a.isOpen;"single"===a.settings.mode&&a.items.length&&(a.hideInput(),a.isBlurring||a.$control_input.blur()),a.isOpen=!1,a.$dropdown.hide(),a.setActiveOption(null),a.refreshState(),b&&a.trigger("dropdown_close",a.$dropdown)},positionDropdown:function(){var a=this.$control,b="body"===this.settings.dropdownParent?a.offset():a.position();b.top+=a.outerHeight(!0),this.$dropdown.css({width:a[0].getBoundingClientRect().width,top:b.top,left:b.left})},clear:function(a){var b=this;b.items.length&&(b.$control.children(":not(input)").remove(),b.items=[],b.lastQuery=null,b.setCaret(0),b.setActiveItem(null),b.updatePlaceholder(),b.updateOriginalInput({silent:a}),b.refreshState(),b.showInput(),b.trigger("clear"))},insertAtCaret:function(a){var b=Math.min(this.caretPos,this.items.length),c=a[0],d=this.buffer||this.$control[0];0===b?d.insertBefore(c,d.firstChild):d.insertBefore(c,d.childNodes[b]),this.setCaret(b+1)},deleteSelection:function(b){var c,d,e,f,g,h,i,j,k,l=this;if(e=b&&8===b.keyCode?-1:1,f=r(l.$control_input[0]),l.$activeOption&&!l.settings.hideSelected&&(i=l.getAdjacentOption(l.$activeOption,-1).attr("data-value")),g=[],l.$activeItems.length){for(k=l.$control.children(".active:"+(e>0?"last":"first")),h=l.$control.children(":not(input)").index(k),e>0&&h++,c=0,d=l.$activeItems.length;c<d;c++)g.push(a(l.$activeItems[c]).attr("data-value"));b&&(b.preventDefault(),b.stopPropagation())}else(l.isFocused||"single"===l.settings.mode)&&l.items.length&&(e<0&&0===f.start&&0===f.length?g.push(l.items[l.caretPos-1]):e>0&&f.start===l.$control_input.val().length&&g.push(l.items[l.caretPos]));if(!g.length||"function"==typeof l.settings.onDelete&&!1===l.settings.onDelete.apply(l,[g]))return!1;for(void 0!==h&&l.setCaret(h);g.length;)l.removeItem(g.pop());return l.showInput(),l.positionDropdown(),l.refreshOptions(!0),i&&(j=l.getOption(i),j.length&&l.setActiveOption(j)),!0},advanceSelection:function(a,b){var c,d,e,f,g,h=this;0!==a&&(h.rtl&&(a*=-1),c=a>0?"last":"first",d=r(h.$control_input[0]),h.isFocused&&!h.isInputHidden?(f=h.$control_input.val().length,(a<0?0===d.start&&0===d.length:d.start===f)&&!f&&h.advanceCaret(a,b)):(g=h.$control.children(".active:"+c),g.length&&(e=h.$control.children(":not(input)").index(g),h.setActiveItem(null),h.setCaret(a>0?e+1:e))))},advanceCaret:function(a,b){var c,d,e=this;0!==a&&(c=a>0?"next":"prev",e.isShiftDown?(d=e.$control_input[c](),d.length&&(e.hideInput(),e.setActiveItem(d),b&&b.preventDefault())):e.setCaret(e.caretPos+a))},setCaret:function(b){var c=this;if(b="single"===c.settings.mode?c.items.length:Math.max(0,Math.min(c.items.length,b)),!c.isPending){var d,e,f,g;for(f=c.$control.children(":not(input)"),d=0,e=f.length;d<e;d++)g=a(f[d]).detach(),d<b?c.$control_input.before(g):c.$control.append(g)}c.caretPos=b},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){var a=this;a.$input.prop("disabled",!0),a.$control_input.prop("disabled",!0).prop("tabindex",-1),a.isDisabled=!0,a.lock()},enable:function(){var a=this;a.$input.prop("disabled",!1),a.$control_input.prop("disabled",!1).prop("tabindex",a.tabIndex),a.isDisabled=!1,a.unlock()},destroy:function(){var b=this,c=b.eventNS,d=b.revertSettings;b.trigger("destroy"),b.off(),b.$wrapper.remove(),b.$dropdown.remove(),b.$input.html("").append(d.$children).removeAttr("tabindex").removeClass("selectized").attr({tabindex:d.tabindex}).show(),b.$control_input.removeData("grow"),b.$input.removeData("selectize"),0==--w.count&&w.$testInput&&(w.$testInput.remove(),w.$testInput=void 0),a(window).off(c),a(document).off(c),a(document.body).off(c),delete b.$input[0].selectize},render:function(b,c){var d,e,f="",g=!1,h=this;return"option"!==b&&"item"!==b||(d=k(c[h.settings.valueField]),g=!!d),g&&(j(h.renderCache[b])||(h.renderCache[b]={}),h.renderCache[b].hasOwnProperty(d))?h.renderCache[b][d]:(f=a(h.settings.render[b].apply(this,[c,l])),"option"===b||"option_create"===b?c[h.settings.disabledField]||f.attr("data-selectable",""):"optgroup"===b&&(e=c[h.settings.optgroupValueField]||"",f.attr("data-group",e),c[h.settings.disabledField]&&f.attr("data-disabled","")),"option"!==b&&"item"!==b||f.attr("data-value",d||""),g&&(h.renderCache[b][d]=f[0]),f[0])},clearCache:function(a){var b=this;void 0===a?b.renderCache={}:delete b.renderCache[a]},canCreate:function(a){var b=this;if(!b.settings.create)return!1;var c=b.settings.createFilter;return a.length&&("function"!=typeof c||c.apply(b,[a]))&&("string"!=typeof c||new RegExp(c).test(a))&&(!(c instanceof RegExp)||c.test(a))}}),w.count=0,w.defaults={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:!1,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!1,preload:!1,allowEmptyOption:!1,closeAfterSelect:!1,scrollDuration:60,loadThrottle:300,loadingClass:"loading",dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",dropdownContentClass:"selectize-dropdown-content",dropdownParent:null,copyClassesToDropdown:!0,render:{}},a.fn.selectize=function(b){var c=a.fn.selectize.defaults,d=a.extend({},c,b),e=d.dataAttr,f=d.labelField,g=d.valueField,h=d.disabledField,i=d.optgroupField,j=d.optgroupLabelField,l=d.optgroupValueField,m=function(b,c){var h,i,j,k,l=b.attr(e);if(l)for(c.options=JSON.parse(l),h=0,i=c.options.length;h<i;h++)c.items.push(c.options[h][g]);else{var m=a.trim(b.val()||"");if(!d.allowEmptyOption&&!m.length)return;for(j=m.split(d.delimiter),h=0,i=j.length;h<i;h++)k={},k[f]=j[h],k[g]=j[h],c.options.push(k);c.items=j}},n=function(b,c){var m,n,o,p,q=c.options,r={},s=function(a){var b=e&&a.attr(e);return"string"==typeof b&&b.length?JSON.parse(b):null},t=function(b,e){b=a(b);var j=k(b.val());if(j||d.allowEmptyOption)if(r.hasOwnProperty(j)){if(e){var l=r[j][i];l?a.isArray(l)?l.push(e):r[j][i]=[l,e]:r[j][i]=e}}else{var m=s(b)||{};m[f]=m[f]||b.text(),m[g]=m[g]||j,m[h]=m[h]||b.prop("disabled"),m[i]=m[i]||e,r[j]=m,q.push(m),b.is(":selected")&&c.items.push(j)}};for(c.maxItems=b.attr("multiple")?null:1,p=b.children(),m=0,n=p.length;m<n;m++)o=p[m].tagName.toLowerCase(),"optgroup"===o?function(b){var d,e,f,g,i;for(b=a(b),f=b.attr("label"),f&&(g=s(b)||{},g[j]=f,g[l]=f,g[h]=b.prop("disabled"),c.optgroups.push(g)),i=a("option",b),d=0,e=i.length;d<e;d++)t(i[d],f)}(p[m]):"option"===o&&t(p[m])};return this.each(function(){if(!this.selectize){var e=a(this),f=this.tagName.toLowerCase(),g=e.attr("placeholder")||e.attr("data-placeholder");g||d.allowEmptyOption||(g=e.children('option[value=""]').text());var h={placeholder:g,options:[],optgroups:[],items:[]};"select"===f?n(e,h):m(e,h),new w(e,a.extend(!0,{},c,h,b))}})},a.fn.selectize.defaults=w.defaults,a.fn.selectize.support={validity:i},w.define("drag_drop",function(b){if(!a.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if("multi"===this.settings.mode){var c=this;c.lock=function(){var a=c.lock;return function(){var b=c.$control.data("sortable");return b&&b.disable(),a.apply(c,arguments)}}(),c.unlock=function(){var a=c.unlock;return function(){var b=c.$control.data("sortable");return b&&b.enable(),a.apply(c,arguments)}}(),c.setup=function(){var b=c.setup;return function(){b.apply(this,arguments);var d=c.$control.sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:c.isLocked,start:function(a,b){b.placeholder.css("width",b.helper.css("width")),d.css({overflow:"visible"})},stop:function(){d.css({overflow:"hidden"});var b=c.$activeItems?c.$activeItems.slice():null,e=[];d.children("[data-value]").each(function(){e.push(a(this).attr("data-value"))}),c.setValue(e),c.setActiveItem(b)}})}}()}}),w.define("dropdown_header",function(b){var c=this;b=a.extend({title:"Untitled",headerClass:"selectize-dropdown-header",titleRowClass:"selectize-dropdown-header-title",labelClass:"selectize-dropdown-header-label",closeClass:"selectize-dropdown-header-close",html:function(a){return'<div class="'+a.headerClass+'"><div class="'+a.titleRowClass+'"><span class="'+a.labelClass+'">'+a.title+'</span><a href="javascript:void(0)" class="'+a.closeClass+'">&times;</a></div></div>'}},b),c.setup=function(){var d=c.setup;return function(){d.apply(c,arguments),c.$dropdown_header=a(b.html(b)),c.$dropdown.prepend(c.$dropdown_header)}}()}),w.define("optgroup_columns",function(b){var c=this;b=a.extend({equalizeWidth:!0,equalizeHeight:!0},b),this.getAdjacentOption=function(b,c){var d=b.closest("[data-group]").find("[data-selectable]"),e=d.index(b)+c;return e>=0&&e<d.length?d.eq(e):a()},this.onKeyDown=function(){var a=c.onKeyDown;return function(b){var d,e,f,g;return!this.isOpen||37!==b.keyCode&&39!==b.keyCode?a.apply(this,arguments):(c.ignoreHover=!0,g=this.$activeOption.closest("[data-group]"),d=g.find("[data-selectable]").index(this.$activeOption),g=37===b.keyCode?g.prev("[data-group]"):g.next("[data-group]"),f=g.find("[data-selectable]"),e=f.eq(Math.min(f.length-1,d)),void(e.length&&this.setActiveOption(e)))}}();var d=function(){var a,b=d.width,c=document;return void 0===b&&(a=c.createElement("div"),a.innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',a=a.firstChild,c.body.appendChild(a),b=d.width=a.offsetWidth-a.clientWidth,c.body.removeChild(a)),b},e=function(){var e,f,g,h,i,j,k;if(k=a("[data-group]",c.$dropdown_content),(f=k.length)&&c.$dropdown_content.width()){if(b.equalizeHeight){for(g=0,e=0;e<f;e++)g=Math.max(g,k.eq(e).height());k.css({height:g})}b.equalizeWidth&&(j=c.$dropdown_content.innerWidth()-d(),h=Math.round(j/f),k.css({width:h}),f>1&&(i=j-h*(f-1),k.eq(f-1).css({width:i})))}};(b.equalizeHeight||b.equalizeWidth)&&(m.after(this,"positionDropdown",e),m.after(this,"refreshOptions",e))}),w.define("remove_button",function(b){b=a.extend({label:"&times;",title:"Remove",className:"remove",append:!0},b);if("single"===this.settings.mode)return void function(b,c){c.className="remove-single";var d=b,e='<a href="javascript:void(0)" class="'+c.className+'" tabindex="-1" title="'+l(c.title)+'">'+c.label+"</a>",f=function(b,c){return a("<span>").append(b).append(c)};b.setup=function(){var g=d.setup;return function(){if(c.append){var h=a(d.$input.context).attr("id"),i=(a("#"+h),d.settings.render.item);d.settings.render.item=function(a){return f(i.apply(b,arguments),e)}}g.apply(b,arguments),b.$control.on("click","."+c.className,function(a){a.preventDefault(),d.isLocked||d.clear()})}}()}(this,b);!function(b,c){var d=b,e='<a href="javascript:void(0)" class="'+c.className+'" tabindex="-1" title="'+l(c.title)+'">'+c.label+"</a>",f=function(a,b){var c=a.search(/(<\/[^>]+>\s*)$/);return a.substring(0,c)+b+a.substring(c)};b.setup=function(){var g=d.setup;return function(){if(c.append){var h=d.settings.render.item;d.settings.render.item=function(a){return f(h.apply(b,arguments),e)}}g.apply(b,arguments),b.$control.on("click","."+c.className,function(b){if(b.preventDefault(),!d.isLocked){var c=a(b.currentTarget).parent();d.setActiveItem(c),d.deleteSelection()&&d.setCaret(d.items.length)}})}}()}(this,b)}),w.define("restore_on_backspace",function(a){var b=this;a.text=a.text||function(a){return a[this.settings.labelField]},this.onKeyDown=function(){var c=b.onKeyDown;return function(b){var d,e;return 8===b.keyCode&&""===this.$control_input.val()&&!this.$activeItems.length&&(d=this.caretPos-1)>=0&&d<this.items.length?(e=this.options[this.items[d]],this.deleteSelection(b)&&(this.setTextboxValue(a.text.apply(this,[e])),this.refreshOptions(!0)),void b.preventDefault()):c.apply(this,arguments)}}()}),w});
